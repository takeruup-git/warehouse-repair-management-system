# 統合テスト

## 概要
実装した全機能の統合テストを実施します。テストフレームワークとしてpytestを使用し、各機能の動作確認および機能間の連携を検証します。

## テスト項目
1. CSVアップロード機能テスト
   - CSVファイルのアップロード機能
   - データの正確な取り込み検証
   - エラーハンドリング

2. PDF管理機能テスト
   - PDFファイルのアップロード機能
   - PDFファイルの表示機能
   - PDFファイルの関連付け（修繕記録、点検記録）

3. 操作者管理機能テスト
   - 操作者選択モーダルの表示
   - 操作者情報のセッション保持
   - 操作者情報のデータベース記録

4. ダッシュボード改良テスト
   - 概要情報の表示
   - グラフ・チャートの表示
   - 最近の修繕記録表示

5. 年次点検機能テスト
   - 年次点検レポートのアップロード
   - 点検履歴の表示
   - PDFレポートの関連付け

6. フォーマット出力機能テスト
   - Excelフォーマットの生成
   - フォークリフト情報の正確な出力
   - ダウンロード機能

## テスト実装
統合テストは以下のディレクトリ構造で実装されています：

```
tests/
├── conftest.py          # テスト設定・フィクスチャ
├── integration/         # 統合テスト
│   ├── test_annual_inspection.py    # 年次点検テスト
│   ├── test_csv_upload.py           # CSVアップロードテスト
│   ├── test_dashboard.py            # ダッシュボードテスト
│   ├── test_inspection_format.py    # フォーマット出力テスト
│   ├── test_integration.py          # 全機能連携テスト
│   ├── test_operator_management.py  # 操作者管理テスト
│   └── test_pdf_management.py       # PDF管理テスト
└── uploads/             # テスト用アップロードディレクトリ
```

## テスト実行方法
統合テストは以下のコマンドで実行できます：

```bash
# すべての統合テストを実行
python run_integration_tests.py

# 特定のテストのみ実行
pytest -xvs tests/integration/test_csv_upload.py
```

## テスト計画
1. 各機能の単体テスト実施
   - 個別機能の正常動作確認
   - エラーケースの検証

2. 機能間の連携テスト実施
   - 複数機能を組み合わせたワークフロー検証
   - データの整合性確認

3. エンドツーエンドテスト実施
   - ユーザーシナリオに基づく一連の操作検証
   - 実際の利用パターンに沿ったテスト